(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{320:function(e){e.exports=JSON.parse('{"file_path":"./contracts/alley_swap.wasm","gas_price":"2500","gas_limit":"3000000000","wallet_file":"./mainnet-wallet.dat","node_rpc_addr":"http://dappnode4.ont.io:20336","admin":"ALPXWTuS9vwUpA76wWj4WYEmD4JE1Tn2DE","contract_addr":"0ad75fba05a6416440052c12cc8bfa1138cf6a47","deploy_args":{"name":"Alley Swap","version":"1.0","author":"Alley Finance","email":"support@alley.finance","desc":"Alley Swap Contract"},"user_address":"ALPXWTuS9vwUpA76wWj4WYEmD4JE1Tn2DE","coins":[{"name":"SUSD","address":"17a58a4a65959c2f567e5063c560f9d09fb81284","index":0,"decimal":18},{"name":"USDT","address":"ac654837a90eee8fccabd87a2d4fc7637484f01a","index":1,"decimal":6},{"name":"USDC","address":"061a07cd393aac289b8ecfda2c3784b637a2fb33","index":2,"decimal":6}],"amp":"900","fee":"50000000","admin_fee":"6000000000"}')},343:function(e,t,n){},478:function(e,t){},479:function(e,t){},498:function(e,t){},500:function(e,t){},511:function(e,t){},513:function(e,t){},532:function(e,t){},551:function(e,t){},553:function(e,t){},558:function(e,t){},560:function(e,t){},572:function(e,t){},575:function(e,t){},592:function(e,t){},599:function(e,t){},618:function(e,t,n){var a={"./aes":292,"./aes.js":292,"./big":293,"./big.js":293,"./ctx":197,"./ctx.js":197,"./ecdh":294,"./ecdh.js":294,"./ecp":295,"./ecp.js":295,"./ecp2":296,"./ecp2.js":296,"./ff":297,"./ff.js":297,"./fp":298,"./fp.js":298,"./fp12":299,"./fp12.js":299,"./fp2":300,"./fp2.js":300,"./fp4":301,"./fp4.js":301,"./gcm":302,"./gcm.js":302,"./hash256":303,"./hash256.js":303,"./hash384":304,"./hash384.js":304,"./hash512":305,"./hash512.js":305,"./mpin":306,"./mpin.js":306,"./newhope":307,"./newhope.js":307,"./nhs":308,"./nhs.js":308,"./pair":309,"./pair.js":309,"./rand":310,"./rand.js":310,"./rom_curve":311,"./rom_curve.js":311,"./rom_field":312,"./rom_field.js":312,"./rsa":313,"./rsa.js":313,"./sha3":314,"./sha3.js":314,"./uint64":315,"./uint64.js":315};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=618},632:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(0),r=n.n(c),i=n(24),s=n.n(i),o=(n(343),n(92)),l=n(28),u=n.n(l),d=n(54),p=n(80),h=(n(344),n(635)),f=n(636),j=n(640),b=n(641),g=n(333),x=n(637),m=n(639),O=n(638),v=n(332),y=n(142),w=n(58),k=n(144),S=n(320),C=Object(k.b)({name:"alley",initialState:{chainConfig:S,hasPendingTx:!1,account:"",balances:{USDT:0,SUSD:0,USDC:0},blockchain:{height:0,liquidity:{USDT:12345,SUSD:23456,USDC:23124}}},reducers:{login:function(e,t){e.account=t.payload},logout:function(e){e.account=""},setPendingTx:function(e,t){e.hasPendingTx=t.payload},updateBalance:function(e,t){for(var n in t.payload)e.balances[n]=t.payload[n]},updateBlockchain:function(e,t){Object.assign(e.blockchain,t.payload)}}}),_=C.actions,U=(_.login,_.logout,n(321),n(334)),T=n(93),D=n(115),B=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{type:"Address",value:t}],c=n.map((function(e){return w.client.api.smartContract.invokeRead({scriptHash:e.address,operation:"balanceOf",args:a})})),e.next=4,Promise.all(c);case 4:return r=e.sent,i=r.map((function(e,t){var a=D.utils.bigIntFromBytes(e);return a=new T.BigNumber(a).div(Math.pow(10,n[t].decimal)).toNumber(),Object(o.a)({},n[t].name,a)})),e.abrupt("return",Object.assign.apply(Object,[{}].concat(Object(U.a)(i))));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function A(e,t,n,a,c){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(u.a.mark((function e(t,n,a,c,r){var i,s,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.chainConfig.coins.find((function(e){return e.name===n})),s=t.chainConfig.coins.find((function(e){return e.name===a})),o={scriptHash:t.chainConfig.contract_addr,operation:"approve_exchange",gasPrice:2500,gasLimit:2e6,args:[{type:"Address",value:t.account},{type:"Integer",value:i.index},{type:"Integer",value:s.index},{type:"Long",value:new T.BigNumber(c).multipliedBy(Math.pow(10,i.decimal)).toFixed(0)},{type:"Long",value:new T.BigNumber(r).multipliedBy(Math.pow(10,s.decimal)).toFixed(0)}]},console.log(o),e.next=6,w.client.api.smartContract.invokeWasm(o);case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n,a){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(u.a.mark((function e(t,n,a,c){var r,i,s,o,l,d,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chainConfig.coins.find((function(e){return e.name===n})),i=t.chainConfig.coins.find((function(e){return e.name===c})),s=(s=new T.BigNumber(a)).multipliedBy(Math.pow(10,r.decimal)),o=[{type:"Long",value:r.index.toString()},{type:"Long",value:i.index.toString()},{type:"Long",value:s.toFixed()}],e.next=7,w.client.api.smartContract.invokeWasmRead({scriptHash:t.chainConfig.contract_addr,operation:"get_dy_underlying",args:o});case 7:return l=e.sent,d=new D.utils.StringReader(l),p=d.readUint128()/Math.pow(10,i.decimal),e.abrupt("return",p);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return D.utils.reverseHex(e.read(20))}function M(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.client.api.smartContract.invokeWasmRead({scriptHash:t.chainConfig.contract_addr,operation:"get_global_state"});case 2:return n=e.sent,a=new D.utils.StringReader(n),e.abrupt("return",{coins:[E(a),E(a),E(a)],balances:[a.readUint128(),a.readUint128(),a.readUint128()],fee:a.readUint128(),admin_fee:a.readUint128(),owner:E(a),future_owner:E(a),initial_amp:a.readUint128(),future_amp:a.readUint128(),initial_amp_time:a.readUint64(),future_amp_time:a.readUint64(),is_killed:a.readBoolean()});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w.client.registerClient({});var N=h.a.Title,H=h.a.Text,I=f.a.Option,R=function(e){var t=e.state,n=e.actions,r=n.dispatch,i=n.onSwap,s=t.chainConfig.coins,l=s.map((function(e){return e.name})),h=Object(c.useState)(100),v=Object(p.a)(h,2),y=v[0],k=v[1],S=Object(c.useState)(100),C=Object(p.a)(S,2),_=C[0],U=C[1],T=Object(c.useState)(l[0]),D=Object(p.a)(T,2),A=D[0],L=D[1],W=Object(c.useState)(l[1]),E=Object(p.a)(W,2),F=E[0],N=E[1],R=Object(c.useState)(5),J=Object(p.a)(R,2),q=J[0],V=J[1],G=Object(c.useState)(1),X=Object(p.a)(G,2),Y=X[0],K=X[1],Q=function(){var e=Object(d.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(n),e.next=3,P(t,A,n,F);case 3:a=e.sent,U(a),K(a/n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e,t){var n=y;t?(e===F&&(N(A),n=_),L(e)):(e===A&&L(F),N(e)),Q(n)};Object(c.useEffect)((function(){var e=setInterval(Object(d.a)(u.a.mark((function e(){var n,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.client.api.network.getBlockHeight();case 3:if(n=e.sent,!(t.blockchain.height<n)){e.next=16;break}if(console.log("current height:",n),r.updateBlockchain({height:n}),""===t.account){e.next=12;break}return e.next=10,B(t.account,s);case 10:c=e.sent,r.updateBalance(c);case 12:return e.next=14,M(t);case 14:i=e.sent,r.updateBlockchain((a={},Object(o.a)(a,l[0],i.balances[0]/Math.pow(10,s[0].decimal)),Object(o.a)(a,l[1],i.balances[1]/Math.pow(10,s[1].decimal)),Object(o.a)(a,l[2],i.balances[2]/Math.pow(10,s[2].decimal)),a));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("get balance error: ",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),1e3);return function(){return clearInterval(e)}}));var $=y<=t.balances[A];return Object(a.jsxs)("div",{className:"swap-input-group",style:{backgroundColor:"#fff",padding:"20px",margin:"0 auto",width:"500px",borderRadius:"10px"},children:[Object(a.jsx)("div",{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(b.a,{span:8,children:Object(a.jsx)("strong",{children:"Input"})}),Object(a.jsxs)(b.a,{span:6,offset:9,style:{color:"#777"},children:[" ",Object(a.jsxs)(g.a,{style:{borderWidth:0},onClick:function(){Q(t.balances[A])},children:[Object(a.jsxs)("strong",{style:{textDecoration:"underline"},children:["Available: ",t.balances[A]]})," "]})," "]})]})}),Object(a.jsxs)(x.a.Group,{compact:!0,size:"large",children:[Object(a.jsx)(m.a,{size:"large",value:y,style:{width:"70%"},onChange:function(e){Q(e)},defaultValue:y}),Object(a.jsx)(f.a,{defaultValue:A,value:A,style:{width:"30%"},onChange:function(e){return Z(e,!0)},children:l.map((function(e){return Object(a.jsx)(I,{value:e,children:Object(a.jsx)("div",{style:{lineHeight:"36px",color:"#f9f"},children:e})},e.toString())}))})]}),Object(a.jsx)("div",{style:{marginTop:"15px"},children:Object(a.jsxs)(j.a,{children:[" ",Object(a.jsx)(b.a,{span:8,children:Object(a.jsx)("strong",{children:"Output"})})," "]})}),Object(a.jsxs)(x.a.Group,{compact:!0,size:"large",children:[Object(a.jsx)(m.a,{size:"large",value:_,style:{width:"70%"},defaultValue:_}),Object(a.jsx)(f.a,{defaultValue:F,value:F,style:{width:"30%"},onChange:function(e){return Z(e,!1)},children:l.map((function(e){return Object(a.jsx)(I,{value:e,children:Object(a.jsx)("div",{style:{lineHeight:"36px",color:"#f9f"},children:e})},e.toString())}))})]}),Object(a.jsxs)("div",{style:{margin:"15px auto"},children:[Object(a.jsx)(H,{style:{marginRight:"5px"},children:"Slippage Tolerance:"}),Object(a.jsxs)(O.a.Group,{onChange:function(e){V(e.target.value)},value:q,children:[Object(a.jsx)(O.a,{value:5,children:"0.5%"}),Object(a.jsx)(O.a,{value:10,children:"1.0%"}),Object(a.jsx)(O.a,{value:20,children:"2.0%"})]})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(H,{children:["Price: ",Y," ",F," / ",A]})}),Object(a.jsx)("div",{style:{textAlign:"center",marginTop:"30px"},children:""===t.account?Object(a.jsx)(g.a,{size:"large",onClick:function(){return function(e,t){return z.apply(this,arguments)}(t,r)},type:"primary",style:{width:"50%",margin:"10px auto"},children:"Connect Wallet"}):Object(a.jsx)(g.a,{size:"large",disabled:!$,loading:t.hasPendingTx,onClick:function(e){i(A,F,y,_*(1e3-q)/1e3)},type:"primary",style:{width:"50%",margin:"10px auto"},children:$?"Comfirm":"Insufficent Balance"})})]})};function z(){return(z=Object(d.a)(u.a.mark((function e(t,n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.account){e.next=19;break}return e.prev=1,e.next=4,w.client.api.asset.getAccount();case 4:if(""===(a=e.sent)){e.next=11;break}return e.next=8,B(a,t.chainConfig.coins);case 8:c=e.sent,n.updateBalance(c),n.login(a);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0),alert("please install cyano wallet!");case 17:e.next=20;break;case 19:n.logout();case 20:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var J=Object(y.b)((function(e){return{state:e}}),(function(e,t){return{dispatch:{login:function(t){e(C.actions.login(t))},logout:function(){e(C.actions.logout())},setPendingTx:function(t){e(C.actions.setPendingTx(t))},updateBalance:function(t){e(C.actions.updateBalance(t))},updateBlockchain:function(t){e(C.actions.updateBlockchain(t))}}}}))((function(e){var t=e.state,n=e.dispatch,c=function(){var e=Object(d.a)(u.a.mark((function e(a,c,r,i){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setPendingTx(!0),e.prev=1,e.next=4,A(t,a,c,r,i);case 4:s=e.sent,console.log(s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),"CANCELED"===e.t0?v.b.info("Transaction canceled!"):(console.log(e.t0),alert(e.t0));case 11:return e.prev=11,n.setPendingTx(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),r=t.account;""===r&&(r="Connect Wallet");var i={dispatch:n,onSwap:c},s=function(e){return e.length<=15?e:e.substr(0,5)+"..."+e.substr(e.length-5)};return Object(a.jsxs)("div",{style:{backgroundColor:"#f3e9e9",height:"100%"},children:[Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)(N,{level:1,children:"Alley Swap"}),Object(a.jsxs)("div",{style:{margin:"20px auto",width:"80%",maxWidth:"600px",textAlign:"center"},children:[Object(a.jsx)(N,{level:3,children:"Market Overview"}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(b.a,{span:8,style:{textAlign:"left"},children:Object(a.jsxs)("strong",{children:["Height: ",t.blockchain.height]})}),Object(a.jsx)(b.a,{span:8,style:{textAlign:"center"},children:Object(a.jsxs)("strong",{children:["Login: ",s(t.account)]})}),Object(a.jsx)(b.a,{span:8,style:{textAlign:"right"},children:Object(a.jsxs)("strong",{children:["Contract: ",s(t.chainConfig.contract_addr)]})})]}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(b.a,{span:8,style:{textAlign:"left"},children:Object(a.jsxs)("strong",{children:["Luiqidity USDT: ",t.blockchain.USDT]})}),Object(a.jsx)(b.a,{span:8,style:{textAlign:"center"},children:Object(a.jsxs)("strong",{children:["Luiqidity USDC: ",t.blockchain.USDC]})}),Object(a.jsx)(b.a,{span:8,style:{textAlign:"right"},children:Object(a.jsxs)("strong",{children:["Luiqidity SUSD: ",t.blockchain.SUSD]})})]})]})]}),R({state:t,actions:i})]})})),q=Object(k.a)({reducer:C.reducer});window.store=q;var V=function(){return Object(a.jsx)(y.a,{store:q,children:Object(a.jsx)(J,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,642)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(V,{})}),document.getElementById("root")),G()}},[[632,1,2]]]);
//# sourceMappingURL=main.700bb8ed.chunk.js.map