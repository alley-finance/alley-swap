(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{320:function(e){e.exports=JSON.parse('{"file_path":"./contracts/alley_swap.wasm","gas_price":"2500","gas_limit":"3000000000","wallet_file":"./mainnet-wallet.dat","node_rpc_addr":"http://dappnode4.ont.io:20336","admin":"ALPXWTuS9vwUpA76wWj4WYEmD4JE1Tn2DE","contract_addr":"0ad75fba05a6416440052c12cc8bfa1138cf6a47","deploy_args":{"name":"Alley Swap","version":"1.0","author":"Alley Finance","email":"support@alley.finance","desc":"Alley Swap Contract"},"user_address":"ALPXWTuS9vwUpA76wWj4WYEmD4JE1Tn2DE","coins":[{"name":"SUSD","address":"17a58a4a65959c2f567e5063c560f9d09fb81284","index":0,"decimal":18},{"name":"USDT","address":"ac654837a90eee8fccabd87a2d4fc7637484f01a","index":1,"decimal":6},{"name":"USDC","address":"061a07cd393aac289b8ecfda2c3784b637a2fb33","index":2,"decimal":6}],"amp":"900","fee":"50000000","admin_fee":"6000000000"}')},343:function(e,n,t){},478:function(e,n){},479:function(e,n){},498:function(e,n){},500:function(e,n){},511:function(e,n){},513:function(e,n){},532:function(e,n){},551:function(e,n){},553:function(e,n){},558:function(e,n){},560:function(e,n){},572:function(e,n){},575:function(e,n){},592:function(e,n){},599:function(e,n){},618:function(e,n,t){var a={"./aes":292,"./aes.js":292,"./big":293,"./big.js":293,"./ctx":197,"./ctx.js":197,"./ecdh":294,"./ecdh.js":294,"./ecp":295,"./ecp.js":295,"./ecp2":296,"./ecp2.js":296,"./ff":297,"./ff.js":297,"./fp":298,"./fp.js":298,"./fp12":299,"./fp12.js":299,"./fp2":300,"./fp2.js":300,"./fp4":301,"./fp4.js":301,"./gcm":302,"./gcm.js":302,"./hash256":303,"./hash256.js":303,"./hash384":304,"./hash384.js":304,"./hash512":305,"./hash512.js":305,"./mpin":306,"./mpin.js":306,"./newhope":307,"./newhope.js":307,"./nhs":308,"./nhs.js":308,"./pair":309,"./pair.js":309,"./rand":310,"./rand.js":310,"./rom_curve":311,"./rom_curve.js":311,"./rom_field":312,"./rom_field.js":312,"./rsa":313,"./rsa.js":313,"./sha3":314,"./sha3.js":314,"./uint64":315,"./uint64.js":315};function c(e){var n=i(e);return t(n)}function i(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=i,e.exports=c,c.id=618},632:function(e,n,t){"use strict";t.r(n);var a=t(6),c=t(0),i=t.n(c),r=t(25),s=t.n(r),o=(t(343),t(93)),u=t(23),l=t.n(u),d=t(46),p=t(81),f=(t(344),t(635)),h=t(636),j=t(640),g=t(641),b=t(333),x=t(637),m=t(639),v=t(638),O=t(332),y=t(142),w=t(55),S=t(144),k=t(320),C=Object(S.b)({name:"alley",initialState:{chainConfig:k,hasPendingTx:!1,account:"",balances:{USDT:0,SUSD:0,USDC:0},blockchain:{height:0,liquidity:{USDT:12345,SUSD:23456,USDC:23124}}},reducers:{login:function(e,n){e.account=n.payload},logout:function(e){e.account=""},setPendingTx:function(e,n){e.hasPendingTx=n.payload},updateBalance:function(e,n){for(var t in n.payload)e.balances[t]=n.payload[t]},updateBlockchain:function(e,n){Object.assign(e.blockchain,n.payload)}}}),_=C.actions,U=(_.login,_.logout,t(321),t(334)),B=t(56),D=t(115),T=function(){var e=Object(d.a)(l.a.mark((function e(n,t){var a,c,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{type:"Address",value:n}],c=t.map((function(e){return w.client.api.smartContract.invokeRead({scriptHash:e.address,operation:"balanceOf",args:a})})),e.next=4,Promise.all(c);case 4:return i=e.sent,r=i.map((function(e,n){var a=D.utils.bigIntFromBytes(e);return a=new B.BigNumber(a).div(Math.pow(10,t[n].decimal)).toNumber(),Object(o.a)({},t[n].name,a)})),e.abrupt("return",Object.assign.apply(Object,[{}].concat(Object(U.a)(r))));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function A(e,n,t,a,c){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(l.a.mark((function e(n,t,a,c,i){var r,s,o,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.chainConfig.coins.find((function(e){return"SUSD"===e.name})),s=n.chainConfig.coins.find((function(e){return"USDT"===e.name})),o=n.chainConfig.coins.find((function(e){return"USDC"===e.name})),u={scriptHash:n.chainConfig.contract_addr,operation:"approve_add_liquidity",gasPrice:2500,gasLimit:2e6,args:[{type:"Address",value:n.account},{type:"Long",value:new B.BigNumber(t).multipliedBy(Math.pow(10,r.decimal)).toFixed(0)},{type:"Long",value:new B.BigNumber(a).multipliedBy(Math.pow(10,s.decimal)).toFixed(0)},{type:"Long",value:new B.BigNumber(c).multipliedBy(Math.pow(10,o.decimal)).toFixed(0)},{type:"Long",value:new B.BigNumber(i).multipliedBy(Math.pow(10,r.decimal)).toFixed(0)}]},console.log(u),e.next=7,w.client.api.smartContract.invokeWasm(u);case 7:return d=e.sent,e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,n,t,a,c){return M.apply(this,arguments)}function M(){return(M=Object(d.a)(l.a.mark((function e(n,t,a,c,i){var r,s,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.chainConfig.coins.find((function(e){return e.name===t})),s=n.chainConfig.coins.find((function(e){return e.name===a})),o={scriptHash:n.chainConfig.contract_addr,operation:"approve_exchange",gasPrice:2500,gasLimit:2e6,args:[{type:"Address",value:n.account},{type:"Integer",value:r.index},{type:"Integer",value:s.index},{type:"Long",value:new B.BigNumber(c).multipliedBy(Math.pow(10,r.decimal)).toFixed(0)},{type:"Long",value:new B.BigNumber(i).multipliedBy(Math.pow(10,s.decimal)).toFixed(0)}]},console.log(o),e.next=6,w.client.api.smartContract.invokeWasm(o);case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,n,t,a){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(l.a.mark((function e(n,t,a,c){var i,r,s,o,u,d,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.chainConfig.coins.find((function(e){return e.name===t})),r=n.chainConfig.coins.find((function(e){return e.name===c})),s=(s=new B.BigNumber(a)).multipliedBy(Math.pow(10,i.decimal)),o=[{type:"Long",value:i.index.toString()},{type:"Long",value:r.index.toString()},{type:"Long",value:s.toFixed()}],e.next=7,w.client.api.smartContract.invokeWasmRead({scriptHash:n.chainConfig.contract_addr,operation:"get_dy_underlying",args:o});case 7:return u=e.sent,d=new D.utils.StringReader(u),p=d.readUint128()/Math.pow(10,r.decimal),e.abrupt("return",p);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return D.utils.reverseHex(e.read(20))}function E(e){return H.apply(this,arguments)}function H(){return(H=Object(d.a)(l.a.mark((function e(n){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.client.api.smartContract.invokeWasmRead({scriptHash:n.chainConfig.contract_addr,operation:"get_global_state"});case 2:return t=e.sent,a=new D.utils.StringReader(t),e.abrupt("return",{coins:[W(a),W(a),W(a)],balances:[a.readUint128(),a.readUint128(),a.readUint128()],fee:a.readUint128(),admin_fee:a.readUint128(),owner:W(a),future_owner:W(a),initial_amp:a.readUint128(),future_amp:a.readUint128(),initial_amp_time:a.readUint64(),future_amp_time:a.readUint64(),is_killed:a.readBoolean()});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w.client.registerClient({});var I=f.a.Title,R=f.a.Text,q=h.a.Option,z=function(e){var n=e.state,t=e.actions,i=t.dispatch,r=t.onSwap,s=n.chainConfig.coins,u=s.map((function(e){return e.name})),f=Object(c.useState)(100),O=Object(p.a)(f,2),y=O[0],S=O[1],k=Object(c.useState)(100),C=Object(p.a)(k,2),_=C[0],U=C[1],B=Object(c.useState)(u[0]),D=Object(p.a)(B,2),A=D[0],L=D[1],P=Object(c.useState)(u[1]),M=Object(p.a)(P,2),N=M[0],W=M[1],H=Object(c.useState)(5),I=Object(p.a)(H,2),z=I[0],V=I[1],G=Object(c.useState)(1),X=Object(p.a)(G,2),Y=X[0],K=X[1],Q=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(t),e.next=3,F(n,A,t,N);case 3:a=e.sent,U(a),K(a/t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Z=function(e,n){var t=y;n?(e===N&&(W(A),t=_),L(e)):(e===A&&L(N),W(e)),Q(t)};Object(c.useEffect)((function(){var e=setInterval(Object(d.a)(l.a.mark((function e(){var t,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.client.api.network.getBlockHeight();case 3:if(t=e.sent,!(n.blockchain.height<t)){e.next=16;break}if(console.log("current height:",t),i.updateBlockchain({height:t}),""===n.account){e.next=12;break}return e.next=10,T(n.account,s);case 10:c=e.sent,i.updateBalance(c);case 12:return e.next=14,E(n);case 14:r=e.sent,i.updateBlockchain((a={},Object(o.a)(a,u[0],r.balances[0]/Math.pow(10,s[0].decimal)),Object(o.a)(a,u[1],r.balances[1]/Math.pow(10,s[1].decimal)),Object(o.a)(a,u[2],r.balances[2]/Math.pow(10,s[2].decimal)),a));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("get balance error: ",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),1e3);return function(){return clearInterval(e)}}));var $=y<=n.balances[A];return Object(a.jsxs)("div",{className:"swap-input-group",style:{backgroundColor:"#fff",padding:"20px",margin:"0 auto",width:"500px",borderRadius:"10px"},children:[Object(a.jsx)("div",{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(g.a,{span:8,children:Object(a.jsx)("strong",{children:"Input"})}),Object(a.jsxs)(g.a,{span:6,offset:9,style:{color:"#777"},children:[" ",Object(a.jsxs)(b.a,{style:{borderWidth:0},onClick:function(){Q(n.balances[A])},children:[Object(a.jsxs)("strong",{style:{textDecoration:"underline"},children:["Available: ",n.balances[A]]})," "]})," "]})]})}),Object(a.jsxs)(x.a.Group,{compact:!0,size:"large",children:[Object(a.jsx)(m.a,{size:"large",value:y,style:{width:"70%"},onChange:function(e){Q(e)},defaultValue:y}),Object(a.jsx)(h.a,{defaultValue:A,value:A,style:{width:"30%"},onChange:function(e){return Z(e,!0)},children:u.map((function(e){return Object(a.jsx)(q,{value:e,children:Object(a.jsx)("div",{style:{lineHeight:"36px",color:"#f9f"},children:e})},e.toString())}))})]}),Object(a.jsx)("div",{style:{marginTop:"15px"},children:Object(a.jsxs)(j.a,{children:[" ",Object(a.jsx)(g.a,{span:8,children:Object(a.jsx)("strong",{children:"Output"})})," "]})}),Object(a.jsxs)(x.a.Group,{compact:!0,size:"large",children:[Object(a.jsx)(m.a,{size:"large",value:_,style:{width:"70%"},defaultValue:_}),Object(a.jsx)(h.a,{defaultValue:N,value:N,style:{width:"30%"},onChange:function(e){return Z(e,!1)},children:u.map((function(e){return Object(a.jsx)(q,{value:e,children:Object(a.jsx)("div",{style:{lineHeight:"36px",color:"#f9f"},children:e})},e.toString())}))})]}),Object(a.jsxs)("div",{style:{margin:"15px auto"},children:[Object(a.jsx)(R,{style:{marginRight:"5px"},children:"Slippage Tolerance:"}),Object(a.jsxs)(v.a.Group,{onChange:function(e){V(e.target.value)},value:z,children:[Object(a.jsx)(v.a,{value:5,children:"0.5%"}),Object(a.jsx)(v.a,{value:10,children:"1.0%"}),Object(a.jsx)(v.a,{value:20,children:"2.0%"})]})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(R,{children:["Price: ",Y," ",N," / ",A]})}),Object(a.jsx)("div",{style:{textAlign:"center",marginTop:"30px"},children:""===n.account?Object(a.jsx)(b.a,{size:"large",onClick:function(){return function(e,n){return J.apply(this,arguments)}(n,i)},type:"primary",style:{width:"50%",margin:"10px auto"},children:"Connect Wallet"}):Object(a.jsx)(b.a,{size:"large",disabled:!$,loading:n.hasPendingTx,onClick:function(e){r(A,N,y,_*(1e3-z)/1e3)},type:"primary",style:{width:"50%",margin:"10px auto"},children:$?"Comfirm":"Insufficent Balance"})})]})};function J(){return(J=Object(d.a)(l.a.mark((function e(n,t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.account){e.next=19;break}return e.prev=1,e.next=4,w.client.api.asset.getAccount();case 4:if(""===(a=e.sent)){e.next=11;break}return e.next=8,T(a,n.chainConfig.coins);case 8:c=e.sent,t.updateBalance(c),t.login(a);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0),alert("please install cyano wallet!");case 17:e.next=20;break;case 19:t.logout();case 20:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var V=Object(y.b)((function(e){return{state:e}}),(function(e,n){return{dispatch:{login:function(n){e(C.actions.login(n))},logout:function(){e(C.actions.logout())},setPendingTx:function(n){e(C.actions.setPendingTx(n))},updateBalance:function(n){e(C.actions.updateBalance(n))},updateBlockchain:function(n){e(C.actions.updateBlockchain(n))}}}}))((function(e){var n=e.state,t=e.dispatch,c=function(){var e=Object(d.a)(l.a.mark((function e(a,c,i,r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setPendingTx(!0),e.prev=1,e.next=4,P(n,a,c,i,r);case 4:s=e.sent,console.log(s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),"CANCELED"===e.t0?O.b.info("Transaction canceled!"):(console.log(e.t0),alert(e.t0));case 11:return e.prev=11,t.setPendingTx(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(n,t,a,c){return e.apply(this,arguments)}}(),i=n.account;""===i&&(i="Connect Wallet");var r={dispatch:t,onSwap:c},s=function(e){return e.length<=15?e:e.substr(0,5)+"..."+e.substr(e.length-5)};return Object(a.jsxs)("div",{style:{backgroundColor:"#f3e9e9",height:"100%"},children:[Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)(I,{level:1,children:"Alley Swap"}),Object(a.jsxs)("div",{style:{margin:"20px auto",width:"80%",maxWidth:"600px",textAlign:"center"},children:[Object(a.jsx)(I,{level:3,children:"Market Overview"}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(g.a,{span:8,style:{textAlign:"left"},children:Object(a.jsxs)("strong",{children:["Height: ",n.blockchain.height]})}),Object(a.jsx)(g.a,{span:8,style:{textAlign:"center"},children:Object(a.jsxs)("strong",{children:["Login: ",s(n.account)]})}),Object(a.jsx)(g.a,{span:8,style:{textAlign:"right"},children:Object(a.jsxs)("strong",{children:["Contract: ",s(n.chainConfig.contract_addr)]})})]}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)(g.a,{span:8,style:{textAlign:"left"},children:Object(a.jsxs)("strong",{children:["Luiqidity USDT: ",n.blockchain.USDT]})}),Object(a.jsx)(g.a,{span:8,style:{textAlign:"center"},children:Object(a.jsxs)("strong",{children:["Luiqidity USDC: ",n.blockchain.USDC]})}),Object(a.jsx)(g.a,{span:8,style:{textAlign:"right"},children:Object(a.jsxs)("strong",{children:["Luiqidity SUSD: ",n.blockchain.SUSD]})})]})]})]}),z({state:n,actions:r})]})})),G=Object(S.a)({reducer:C.reducer});function X(){return(X=Object(d.a)(l.a.mark((function e(n,t,a,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(window.store.getState(),n,t,a,c);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.store=G,window.approveAddLiquidity=function(e,n,t,a){return X.apply(this,arguments)};var Y=function(){return Object(a.jsx)(y.a,{store:G,children:Object(a.jsx)(V,{})})},K=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,642)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,r=n.getTTFB;t(e),a(e),c(e),i(e),r(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Y,{})}),document.getElementById("root")),K()}},[[632,1,2]]]);
//# sourceMappingURL=main.f27eaf9f.chunk.js.map